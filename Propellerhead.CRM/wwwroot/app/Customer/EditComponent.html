<form #EditCustomer="ngForm">
	<div class="row" *ngIf="customer != null">
		<div class="col s12">
			<div class="card">
				<div class="card-content">
					<span class="card-title">Edit Customer</span>
					<div *ngIf="errorMessage != null" class="card-panel red darken-4">
						<p>Error:</p>
						<pre class="text-danger">{{ errorMessage }}</pre>
					</div>

					<div class="row">
						<div class="col s12 m6">
							<div class="row">
								<div class="col s12">
									<label for="name">Name</label>
									<input type="text" class="validate" [(ngModel)]="customer.name" name="name" placeholder="Name" [ngClass]="NgClassIsValid(name)" (change)="customer.Dirty()" />
								</div>
							</div>
							<div class="row">
								<div class="col s12">
									<label for="contactName">Contact Name</label>
									<input type="text" [(ngModel)]="customer.contactName" name="contactName" [ngClass]="NgClassIsValid(contactName)" (change)="customer.Dirty()" />
								</div>
							</div>
							<div class="row">
								<div class="col s12">
									<label for="contactEmail">Contact Email</label>
									<input type="text" [(ngModel)]="customer.contactEmail" name="contactEmail" placeholder="Email" [ngClass]="NgClassIsValid(contactEmail)" (change)="customer.Dirty()" />
								</div>
							</div>
							<div class="row">
								<div class="col s12">
									<label for="contactEmail">Status</label>
									<select class="browser-default" [(ngModel)]="customer.statusId" name="statusId">
										<option *ngFor="let status of statuses" value="{{status.statusId}}">{{status.label}}</option>
									</select>
								</div>
							</div>
							<div class="row">
								<div class="col s12">
									<label for="created">Created</label>
									<input type="text" disabled [value]="customer.created | date:'medium'" name="created" placeholder="Created" />
								</div>
							</div>
							<div class="row">
								<div class="col s12">
									<label for="updated">Updated</label>
									<input type="text" disabled [value]="customer.updated | date:'medium'" name="updated" placeholder="Updated" />
								</div>
							</div>
						</div>


						<div class="col s12 m6">
							<div class="row">
								<div class="col s12">
									<label for="updated">Notes</label>
									<div class="row row-compact">
										<div class="col m12"><a (click)="AddNote()">Add Note</a></div>
									</div>
									<ul class="collection">
										<ng-container *ngIf="customer.notes != null">
											<li class="collection-item" customer-edit-note *ngFor="let note of customer.notes" [note]="note"></li>
										</ng-container>
									</ul>
								</div>
							</div>
						</div>
					</div>

					<div class="card-action">
						<div class="col s12">
							<a href="#" (click)="Update($event)">Update</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div *ngIf="customer == null">
		Loading...
	</div>
</form>